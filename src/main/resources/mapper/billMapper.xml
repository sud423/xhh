<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.xhh.domain.business.BillRepository">
	<select id="getBillByStatus"
		resultType="cn.xhh.domain.business.Bill">
		select * from bill where tenant_id=#{tenantId} and
		user_id=#{userId} and `status`=#{status}
	</select>
	<select id="getItemByBillId"
		resultType="cn.xhh.domain.business.BillItem">
		select i.id,d.text
		express,express_no,price,cost,actual_weight,count,remark,t.volume,CONCAT_WS('',province,city,area,address)
		addr
		from bill_item i
		inner join dict d on i.express=d.`value` and
		d.`key`='express'
		inner join (
		select sum(len*width*height*count) as
		volume,bill_item_id
		from bill_item_package
		group by bill_item_id) as t
		on t.bill_item_id=i.id
		where bill_id=#{billId}
	</select>
</mapper>